(()=>{var e={};e.id=4074,e.ids=[4074],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},75542:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.Z,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>u,tree:()=>i}),r(54118),r(9457),r(19958),r(7629),r(12523);var a=r(23191),s=r(88716),n=r(43315),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let i=["",{children:["admin",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54118)),"/Users/taylorstrong/Redemption23-1/project/src/app/admin/create/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9457)),"/Users/taylorstrong/Redemption23-1/project/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,19958)),"/Users/taylorstrong/Redemption23-1/project/src/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"/Users/taylorstrong/Redemption23-1/project/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"/Users/taylorstrong/Redemption23-1/project/src/app/not-found.tsx"]}],c=["/Users/taylorstrong/Redemption23-1/project/src/app/admin/create/page.tsx"],d="/admin/create/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/create/page",pathname:"/admin/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},68822:(e,t,r)=>{Promise.resolve().then(r.bind(r,25228))},7009:(e,t,r)=>{Promise.resolve().then(r.bind(r,43219))},43810:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},25228:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(10326),s=r(17577),n=r(9086),l=r(700),o=r(50294),i=r(76557);let c=(0,i.Z)("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),d=(0,i.Z)("FolderUp",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]]);var p=r(94019),u=r(63685),x=r(54659),m=r(43810),h=r(46226),b=r(35047);function g(){let e=(0,b.useRouter)(),[t,r]=(0,s.useState)("generate"),[i,g]=(0,s.useState)(""),[j,v]=(0,s.useState)(""),[f,y]=(0,s.useState)("royalty"),[N,w]=(0,s.useState)("Canvas"),[z,k]=(0,s.useState)([]),[P,C]=(0,s.useState)([]),[R,S]=(0,s.useState)(""),[Z,M]=(0,s.useState)(""),[q,O]=(0,s.useState)(!1),[_,U]=(0,s.useState)([]),[A,E]=(0,s.useState)([]),[D,T]=(0,s.useState)(!1),[L,F]=(0,s.useState)(null),I=(0,o.uI)({accept:{"image/*":[".png",".jpg",".jpeg",".webp"]},maxFiles:50,onDrop:e=>U(t=>[...t,...e])}),$=(0,o.uI)({accept:{"image/*":[".png",".jpg",".jpeg",".webp"]},maxFiles:50,onDrop:e=>E(t=>[...t,...e])}),G=(0,o.uI)({accept:{"image/*":[".png",".jpg",".jpeg",".webp"]},maxFiles:1,onDrop:e=>C(e)}),B=e=>{U(t=>t.filter((t,r)=>r!==e))},H=e=>{E(t=>t.filter((t,r)=>r!==e))},V=async r=>{r.preventDefault(),T(!0);let a=`${f} ${N}`.trim();try{if("generate"===t){if(0===P.length){alert("Please upload a pet photo"),T(!1);return}let t=new FormData;t.append("customerName",i),t.append("customerEmail",j),t.append("productType",a),t.append("petPhoto",P[0]),t.append("petBreed",R),t.append("petDetails",Z),t.append("autoApprove",String(q));let r=await fetch("/api/orders/create",{method:"POST",body:t}),s=await r.json();if(!r.ok)throw Error(s.error);F({url:`${window.location.origin}/admin/review`}),setTimeout(()=>{e.push("/admin/review")},1500)}else{let e=new FormData;e.append("customerName",i),e.append("customerEmail",j),e.append("productType",a),_.forEach(t=>e.append("files",t)),A.forEach(t=>e.append("mockups",t));let t=await fetch("/api/orders/manual",{method:"POST",body:e}),r=await t.json();if(!t.ok)throw Error(r.error);F({url:`${window.location.origin}${r.customerUrl}`})}}catch(e){e instanceof Error?alert(e.message||"Error occurred"):alert("Error occurred")}finally{T(!1)}};return a.jsx("div",{className:"min-h-screen px-4 py-8 bg-zinc-950",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-zinc-100",children:"Create Order"}),a.jsx("p",{className:"text-zinc-400",children:"Choose how to fulfill this order"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 p-1 bg-zinc-900 rounded-xl border border-zinc-800",children:[(0,a.jsxs)("button",{onClick:()=>r("generate"),className:`flex items-center justify-center gap-2 py-3 rounded-lg text-sm font-medium transition-all ${"generate"===t?"bg-zinc-800 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:[a.jsx(c,{className:"w-4 h-4"}),"AI Generate"]}),(0,a.jsxs)("button",{onClick:()=>r("manual"),className:`flex items-center justify-center gap-2 py-3 rounded-lg text-sm font-medium transition-all ${"manual"===t?"bg-zinc-800 text-white shadow":"text-zinc-500 hover:text-zinc-300"}`,children:[a.jsx(d,{className:"w-4 h-4"}),"Manual Upload"]})]}),(0,a.jsxs)("form",{onSubmit:V,className:"glass-card p-6 rounded-xl space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-zinc-500 mb-1 block",children:"Customer Name"}),a.jsx("input",{className:"w-full bg-zinc-900 border border-zinc-800 rounded-lg px-4 py-2 text-zinc-100 focus:border-amber-500 outline-none",value:i,onChange:e=>g(e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-zinc-500 mb-1 block",children:"Customer Email"}),a.jsx("input",{type:"email",className:"w-full bg-zinc-900 border border-zinc-800 rounded-lg px-4 py-2 text-zinc-100 focus:border-amber-500 outline-none",value:j,onChange:e=>v(e.target.value),required:!0})]})]}),"generate"===t?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-zinc-500 mb-1 block",children:"Art Theme"}),(0,a.jsxs)("select",{className:"w-full bg-zinc-900 border border-zinc-800 rounded-lg px-4 py-2 text-zinc-100 focus:border-amber-500 outline-none",value:f,onChange:e=>y(e.target.value),children:[a.jsx("option",{value:"royalty",children:"Royalty"}),a.jsx("option",{value:"spaday",children:"Spa Day"}),a.jsx("option",{value:"minimalist",children:"Minimalist"}),a.jsx("option",{value:"valentines",children:"Valentine's"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-zinc-500 mb-1 block",children:"Item / Template"}),(0,a.jsxs)("select",{className:"w-full bg-zinc-900 border border-zinc-800 rounded-lg px-4 py-2 text-zinc-100 focus:border-amber-500 outline-none",value:N,onChange:e=>w(e.target.value),children:[a.jsx("option",{value:"Canvas",children:"Default Canvas"}),a.jsx("option",{value:"Digital",children:"Digital Only"}),z.length>0&&a.jsx("option",{disabled:!0,children:"-- Custom Templates --"}),z.map(e=>a.jsx("option",{value:e.name,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 border-t border-zinc-800 pt-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-zinc-500 mb-1 block",children:"Pet Breed"}),a.jsx("input",{className:"w-full bg-zinc-900 border border-zinc-800 rounded-lg px-4 py-2 text-zinc-100 focus:border-amber-500 outline-none",value:R,onChange:e=>S(e.target.value),placeholder:"e.g. Golden Retriever"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-zinc-500 mb-1 block",children:"Unique Features (Identity Lock)"}),a.jsx("input",{className:"w-full bg-zinc-900 border border-zinc-800 rounded-lg px-4 py-2 text-zinc-100 focus:border-amber-500 outline-none",value:Z,onChange:e=>M(e.target.value),placeholder:"e.g. White spot on chest, missing left eye"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-zinc-500 mb-1 block",children:"Pet Photo"}),(0,a.jsxs)("div",{...G.getRootProps(),className:"border-2 border-dashed border-zinc-800 hover:border-amber-500 rounded-xl p-8 text-center cursor-pointer transition-colors",children:[a.jsx("input",{...G.getInputProps()}),P.length>0?(0,a.jsxs)("div",{className:"relative w-32 h-32 mx-auto",children:[a.jsx(h.default,{src:URL.createObjectURL(P[0]),alt:"Pet",fill:!0,className:"object-cover rounded-lg"}),a.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),C([])},className:"absolute -top-2 -right-2 bg-red-500 rounded-full p-1",children:a.jsx(p.Z,{className:"w-4 h-4 text-white"})})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{className:"w-8 h-8 text-zinc-600 mx-auto mb-2"}),a.jsx("p",{className:"text-zinc-400 text-sm",children:"Drag & drop dog photo here"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-zinc-900/50 rounded-lg border border-zinc-800 mt-4",children:[a.jsx("input",{type:"checkbox",id:"autoApprove",checked:q,onChange:e=>O(e.target.checked),className:"w-5 h-5 rounded border-zinc-700 bg-zinc-800 text-amber-500 focus:ring-amber-500 accent-amber-500"}),a.jsx("label",{htmlFor:"autoApprove",className:"text-sm text-zinc-300 cursor-pointer select-none font-medium",children:'Auto-Approve Results (Skip "Approve All")'})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-zinc-500 mb-1 block",children:"Product Type (Type manually for custom)"}),a.jsx("input",{className:"w-full bg-zinc-900 border border-zinc-800 rounded-lg px-4 py-2 text-zinc-100 focus:border-amber-500 outline-none",value:f,onChange:e=>y(e.target.value),placeholder:"e.g. Custom Portrait"})]}),(0,a.jsxs)("div",{...I.getRootProps(),className:"border-2 border-dashed border-zinc-800 hover:border-amber-500 rounded-xl p-8 text-center cursor-pointer transition-colors",children:[a.jsx("input",{...I.getInputProps()}),a.jsx(u.Z,{className:"w-8 h-8 text-zinc-600 mx-auto mb-2"}),a.jsx("p",{className:"text-zinc-400 text-sm",children:"Drag & drop finished images here"}),(0,a.jsxs)("p",{className:"text-zinc-600 text-xs mt-1",children:[_.length," files selected"]})]}),_.length>0&&a.jsx("div",{className:"grid grid-cols-4 gap-2",children:_.map((e,t)=>(0,a.jsxs)("div",{className:"aspect-square bg-zinc-900 rounded relative group overflow-hidden",children:[a.jsx(h.default,{src:URL.createObjectURL(e),alt:"preview",fill:!0,className:"object-cover"}),a.jsx("button",{type:"button",onClick:()=>B(t),className:"absolute top-1 right-1 bg-red-500 p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(p.Z,{className:"w-3 h-3 text-white"})})]},t))}),(0,a.jsxs)("div",{className:"border-t border-zinc-800 my-4 pt-4",children:[a.jsx("label",{className:"text-xs text-zinc-500 mb-1 block",children:"Manual Mockups (Optional)"}),(0,a.jsxs)("div",{...$.getRootProps(),className:"border-2 border-dashed border-zinc-800 hover:border-blue-500 rounded-xl p-8 text-center cursor-pointer transition-colors bg-zinc-900/30",children:[a.jsx("input",{...$.getInputProps()}),a.jsx(u.Z,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),a.jsx("p",{className:"text-zinc-400 text-sm",children:"Drag & drop mockup images here"}),(0,a.jsxs)("p",{className:"text-zinc-600 text-xs mt-1",children:[A.length," files selected"]})]}),A.length>0&&a.jsx("div",{className:"grid grid-cols-4 gap-2 mt-4",children:A.map((e,t)=>(0,a.jsxs)("div",{className:"aspect-square bg-zinc-900 rounded relative group overflow-hidden border border-blue-500/30",children:[a.jsx(h.default,{src:URL.createObjectURL(e),alt:"mockup-preview",fill:!0,className:"object-cover"}),a.jsx("button",{type:"button",onClick:()=>H(t),className:"absolute top-1 right-1 bg-red-500 p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(p.Z,{className:"w-3 h-3 text-white"})})]},t))})]})]}),a.jsx("button",{disabled:D,className:"w-full btn-primary py-3 rounded-lg font-bold",children:D?"Processing...":"generate"===t?"Start Generation":"Create & Approve Order"})]}),a.jsx(n.M,{children:L&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-card p-6 rounded-xl border border-green-900/50 bg-green-900/10 text-center",children:[a.jsx(x.Z,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-green-400 mb-2",children:"Order Created!"}),"generate"===t?a.jsx("p",{className:"text-zinc-400 mb-4",children:"Images are generating now. Redirecting..."}):(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-black/40 p-2 rounded-lg mt-4",children:[a.jsx("input",{readOnly:!0,value:L.url,className:"bg-transparent flex-1 text-xs text-zinc-400 outline-none font-mono"}),a.jsx("button",{onClick:()=>navigator.clipboard.writeText(L.url),className:"p-2 hover:bg-white/10 rounded",children:a.jsx(m.Z,{className:"w-4 h-4 text-zinc-400"})})]}),(0,a.jsxs)("div",{className:"mt-4 flex gap-2 justify-center",children:[a.jsx("a",{href:L.url,target:"_blank",className:"btn-secondary px-4 py-2 rounded text-sm",children:"Open Link"}),a.jsx("button",{onClick:()=>{F(null),U([]),E([]),C([]),g("")},className:"btn-primary px-4 py-2 rounded text-sm",children:"New Order"})]})]})})]})})}(0,r(47939).eI)("https://opxgicxdrbpgpsxonogk.supabase.co","sb_publishable_oy3hhF4k8MiMOpfOBiCxOw_8nvsY8i2")},43219:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(10326),s=r(35047),n=r(90434),l=r(24319),o=r(51996),i=r(89392),c=r(71709),d=r(76993),p=r(49163),u=r(71810);function x(){let e=(0,s.usePathname)(),t=async()=>{await fetch("/api/admin/logout",{method:"POST"}),window.location.href="/admin/login"},r=[{label:"Command Center",href:"/admin",icon:l.Z,exact:!0},{label:"Create Order",href:"/admin/create",icon:o.Z},{label:"Themes",href:"/admin/themes",icon:i.Z},{label:"Mockups",href:"/admin/mockups",icon:c.Z},{label:"Marketing",href:"/admin/marketing",icon:d.Z}];return(0,a.jsxs)("aside",{className:"w-64 border-r border-brand-blue/30 bg-white/80 backdrop-blur-xl flex flex-col h-screen sticky top-0 shadow-lg shadow-brand-navy/5",children:[a.jsx("div",{className:"p-6 border-b border-brand-blue/30",children:(0,a.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2 text-brand-navy font-playfair",children:[a.jsx(p.Z,{className:"w-6 h-6 text-brand-navy"}),a.jsx("span",{children:"Admin"})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:r.map(t=>{let r=t.exact?e===t.href:e.startsWith(t.href);return(0,a.jsxs)(n.default,{href:t.href,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all font-medium ${r?"bg-brand-navy text-white shadow-md":"text-zinc-500 hover:text-brand-navy hover:bg-brand-blue/20"}`,children:[a.jsx(t.icon,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:t.label})]},t.href)})}),a.jsx("div",{className:"p-4 border-t border-brand-blue/30",children:(0,a.jsxs)("button",{onClick:t,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-zinc-500 hover:text-rose-500 hover:bg-rose-50 transition-all font-medium",children:[a.jsx(u.Z,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Logout"})]})})]})}function m({children:e}){let t=(0,s.usePathname)();if("/admin/login"===t)return a.jsx(a.Fragment,{children:e});let{replace:n}=r(35047).useRouter(),{useEffect:l}=r(17577);return l(()=>{document.cookie.includes("admin-token=authenticated")||n("/admin/login")},[t,n]),(0,a.jsxs)("div",{className:"flex min-h-screen bg-slate-50 text-zinc-900",children:[a.jsx(x,{}),a.jsx("main",{className:"flex-1 max-w-[1600px] w-full mx-auto",children:e})]})}},54118:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`/Users/taylorstrong/Redemption23-1/project/src/app/admin/create/page.tsx#default`)},9457:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`/Users/taylorstrong/Redemption23-1/project/src/app/admin/layout.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,9449,6226,7939,3392,163],()=>r(75542));module.exports=a})();