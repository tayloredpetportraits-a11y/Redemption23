(()=>{var e={};e.id=4518,e.ids=[4518],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35129:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.Z,__next_app__:()=>m,originalPathname:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>o}),a(68767),a(9457),a(19958),a(7629),a(12523);var s=a(23191),r=a(88716),i=a(43315),n=a(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(t,l);let o=["",{children:["admin",{children:["themes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,68767)),"/Users/taylorstrong/Redemption23-1/project/src/app/admin/themes/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,9457)),"/Users/taylorstrong/Redemption23-1/project/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,19958)),"/Users/taylorstrong/Redemption23-1/project/src/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,7629)),"/Users/taylorstrong/Redemption23-1/project/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,12523)),"/Users/taylorstrong/Redemption23-1/project/src/app/not-found.tsx"]}],c=["/Users/taylorstrong/Redemption23-1/project/src/app/admin/themes/page.tsx"],d="/admin/themes/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/themes/page",pathname:"/admin/themes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7009:(e,t,a)=>{Promise.resolve().then(a.bind(a,43219))},12757:(e,t,a)=>{Promise.resolve().then(a.bind(a,15934))},924:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},94893:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},98091:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},43219:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(10326),r=a(35047),i=a(90434),n=a(24319),l=a(51996),o=a(89392),c=a(71709),d=a(76993),m=a(49163),h=a(71810);function p(){let e=(0,r.usePathname)(),t=async()=>{await fetch("/api/admin/logout",{method:"POST"}),window.location.href="/admin/login"},a=[{label:"Command Center",href:"/admin",icon:n.Z,exact:!0},{label:"Create Order",href:"/admin/create",icon:l.Z},{label:"Themes",href:"/admin/themes",icon:o.Z},{label:"Mockups",href:"/admin/mockups",icon:c.Z},{label:"Marketing",href:"/admin/marketing",icon:d.Z}];return(0,s.jsxs)("aside",{className:"w-64 border-r border-brand-blue/30 bg-white/80 backdrop-blur-xl flex flex-col h-screen sticky top-0 shadow-lg shadow-brand-navy/5",children:[s.jsx("div",{className:"p-6 border-b border-brand-blue/30",children:(0,s.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2 text-brand-navy font-playfair",children:[s.jsx(m.Z,{className:"w-6 h-6 text-brand-navy"}),s.jsx("span",{children:"Admin"})]})}),s.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:a.map(t=>{let a=t.exact?e===t.href:e.startsWith(t.href);return(0,s.jsxs)(i.default,{href:t.href,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all font-medium ${a?"bg-brand-navy text-white shadow-md":"text-zinc-500 hover:text-brand-navy hover:bg-brand-blue/20"}`,children:[s.jsx(t.icon,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:t.label})]},t.href)})}),s.jsx("div",{className:"p-4 border-t border-brand-blue/30",children:(0,s.jsxs)("button",{onClick:t,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-zinc-500 hover:text-rose-500 hover:bg-rose-50 transition-all font-medium",children:[s.jsx(h.Z,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Logout"})]})})]})}function x({children:e}){let t=(0,r.usePathname)();if("/admin/login"===t)return s.jsx(s.Fragment,{children:e});let{replace:i}=a(35047).useRouter(),{useEffect:n}=a(17577);return n(()=>{document.cookie.includes("admin-token=authenticated")||i("/admin/login")},[t,i]),(0,s.jsxs)("div",{className:"flex min-h-screen bg-slate-50 text-zinc-900",children:[s.jsx(p,{}),s.jsx("main",{className:"flex-1 max-w-[1600px] w-full mx-auto",children:e})]})}},15934:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(10326),r=a(17577),i=a(46226),n=a(94019),l=a(98091),o=a(63685),c=a(75290),d=a(924),m=a(94893);let h=(0,a(76557).Z)("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var p=a(50294),x=a(700),u=a(9086);function b({theme:e,type:t,onClose:a,onImageDeleted:o}){let[c,d]=(0,r.useState)([]),[m,h]=(0,r.useState)(!0),p=(0,r.useCallback)(()=>{h(!0),fetch(`/api/admin/themes/details?id=${e.id}&type=${t}`).then(e=>e.json()).then(e=>d(e.images||[])).catch(console.error).finally(()=>h(!1))},[e.id,t]),u=async a=>{if(confirm("Delete this image?"))try{(await fetch("/api/admin/themes/images/delete",{method:"POST",body:JSON.stringify({themeId:e.id,filename:a,type:t})})).ok?(p(),o()):alert("Failed to delete image")}catch(e){console.error(e),alert("Error deleting image")}};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:(0,s.jsxs)(x.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6 w-full max-w-4xl h-[80vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-zinc-100",children:["Manage ",e.name]}),s.jsx("button",{onClick:a,className:"p-2 hover:bg-zinc-800 rounded-lg text-zinc-400 hover:text-white",children:s.jsx(n.Z,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 bg-zinc-950/50 rounded-lg p-4 border border-zinc-800/50",children:m?s.jsx("div",{className:"flex items-center justify-center h-full text-zinc-500",children:"Loading images..."}):0===c.length?s.jsx("div",{className:"flex items-center justify-center h-full text-zinc-500",children:"No images found. Upload some!"}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:c.map(e=>(0,s.jsxs)("div",{className:"group relative aspect-square bg-zinc-900 rounded-lg overflow-hidden border border-zinc-800",children:[s.jsx(i.default,{src:e.url,alt:e.name,fill:!0,className:"object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:s.jsx("button",{onClick:()=>u(e.name),className:"p-2 bg-red-500/20 text-red-400 hover:bg-red-500 hover:text-white rounded-full transition-colors",title:"Delete Image",children:s.jsx(l.Z,{className:"w-5 h-5"})})}),s.jsx("div",{className:"absolute bottom-0 inset-x-0 p-2 bg-black/80 text-[10px] text-zinc-400 truncate",children:e.name})]},e.name))})})]})})}function g({theme:e,onTest:t,onUpload:a,onDelete:n,onManage:h}){let[b,g]=(0,r.useState)(!1),f=(0,r.useCallback)(async t=>{t.length>0&&(g(!0),await a(e.id,t),g(!1))},[e.id,a]),{getRootProps:j,getInputProps:y,isDragActive:v}=(0,p.uI)({onDrop:f,onDropRejected:e=>{let t=e.map(e=>`${e.file.name}: ${e.errors.map(e=>e.message).join(", ")}`).join("\n");alert(`Files rejected:
${t}`)},noClick:!1,accept:{"image/*":[".jpg",".jpeg",".png",".webp"]}});return(0,s.jsxs)("div",{className:"relative bg-zinc-900 rounded-xl overflow-hidden border border-zinc-800 hover:border-zinc-700 transition-all group",children:[(0,s.jsxs)("div",{className:"aspect-square relative bg-zinc-950",children:[(0,s.jsxs)("div",{...j(),className:`absolute inset-0 z-10 cursor-pointer ${v?"ring-2 ring-amber-500/50":""}`,children:[s.jsx("input",{...y()}),e.previewImage?s.jsx(i.default,{src:e.previewImage,alt:e.name,fill:!0,className:"object-cover opacity-80 group-hover:opacity-100 transition-opacity"}):(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-zinc-700 gap-2",children:[s.jsx(o.Z,{className:"w-8 h-8 opacity-20"}),s.jsx("span",{className:"text-xs",children:"Drop images to start"})]}),s.jsx(u.M,{children:(v||b)&&s.jsx(x.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-30 bg-black/80 flex flex-col items-center justify-center p-4 text-center backdrop-blur-sm",children:b?(0,s.jsxs)(s.Fragment,{children:[s.jsx(c.Z,{className:"w-8 h-8 text-amber-500 animate-spin mb-2"}),s.jsx("span",{className:"text-amber-500 font-bold",children:"Uploading..."})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(o.Z,{className:"w-10 h-10 text-amber-500 mb-2"}),s.jsx("span",{className:"text-zinc-200 font-bold",children:"Drop Images Here"}),(0,s.jsxs)("span",{className:"text-zinc-500 text-xs",children:["to add to ",e.name]})]})})})]}),(0,s.jsxs)("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 rounded text-xs text-white font-mono backdrop-blur-sm z-20 pointer-events-none",children:[e.imageCount," items"]}),(0,s.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1 z-20",children:[s.jsx("button",{onClick:t=>{t.stopPropagation(),n(e.id)},className:"p-1.5 bg-black/60 hover:bg-red-500/80 hover:text-white rounded text-zinc-400 backdrop-blur-sm transition-colors shadow-lg",title:"Delete Theme",children:s.jsx(l.Z,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:t=>{t.stopPropagation(),h(e)},className:"p-1.5 bg-black/60 hover:bg-zinc-700 hover:text-white rounded text-zinc-200 backdrop-blur-sm transition-colors shadow-lg",title:"Manage Images",children:s.jsx(d.Z,{className:"w-3.5 h-3.5"})})]})]}),(0,s.jsxs)("div",{className:"p-4 relative z-20 bg-zinc-900",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-zinc-200",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-zinc-500",children:["ID: ",e.id]})]})}),(0,s.jsxs)("button",{onClick:()=>t(e.id),className:"w-full py-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-200 text-sm rounded-lg flex items-center justify-center gap-2 transition-colors",children:[s.jsx(m.Z,{className:"w-3 h-3"})," Test Order"]})]})]})}function f(){let[e,t]=(0,r.useState)("portrait"),[a,i]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[j,y]=(0,r.useState)(""),v=(0,r.useCallback)(()=>{l(!0),fetch("portrait"===e?"/api/admin/themes":"/api/admin/mockup-themes").then(e=>e.json()).then(e=>i(e.themes)).catch(e=>console.error("Failed to load themes:",e)).finally(()=>l(!1))},[e]),N=async t=>{if("mockup"!==e){c(t);try{await fetch("/api/admin/seed",{method:"POST",body:JSON.stringify({theme:t})}),window.location.href="/admin/review"}catch(e){console.error(e),alert("Failed to start test")}finally{c(null)}}},k=async(t,a)=>{let s=new FormData;s.append("themeId",t),a.forEach(e=>s.append("files",e));let r="portrait"===e?"/api/admin/themes/upload":"/api/admin/mockup-themes/upload";console.log(`Uploading to ${r} for theme ${t}`);try{let e=await fetch(r,{method:"POST",body:s});if(e.ok)v(),alert(`Upload Successful: ${a.length} files`);else{let t=await e.text();console.error("Upload failed response:",t),alert(`Upload failed: ${e.status} ${e.statusText}
${t}`)}}catch(e){console.error(e),alert(`Upload error: ${e}`)}},w=async t=>{if(confirm("Are you sure you want to delete this theme? This action cannot be undone."))try{(await fetch("/api/admin/themes/delete",{method:"POST",body:JSON.stringify({themeId:t,type:e})})).ok?v():alert("Failed to delete theme")}catch(e){console.error(e),alert("Error deleting theme")}},z=async t=>{t.preventDefault();let a="portrait"===e?"/api/admin/themes/create":"/api/admin/mockup-themes/create";try{let e=await fetch(a,{method:"POST",body:JSON.stringify({name:j})});if(e.ok)y(""),m(!1),v();else{let t=await e.json();alert(t.error||"Failed to create")}}catch(e){console.error(e),alert("Error creating theme")}};return n&&0===a.length?s.jsx("div",{className:"p-8 text-zinc-400",children:"Loading themes..."}):(0,s.jsxs)("div",{className:"min-h-screen bg-zinc-950 p-8",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-zinc-100 mb-1",children:"Theme Library"}),s.jsx("p",{className:"text-zinc-500 text-sm",children:"Manage your portrait styles and product mockups."})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"bg-zinc-900 p-1 rounded-lg flex border border-zinc-800",children:[s.jsx("button",{onClick:()=>t("portrait"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${"portrait"===e?"bg-zinc-800 text-zinc-100 shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Portraits"}),s.jsx("button",{onClick:()=>t("mockup"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${"mockup"===e?"bg-amber-900/40 text-amber-200 shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Mockups"})]}),(0,s.jsxs)("button",{onClick:()=>m(!0),className:"btn-primary flex items-center gap-2 px-4 py-2 rounded-lg",children:[s.jsx(h,{className:"w-4 h-4"}),"New ","portrait"===e?"Theme":"Product"]})]})]}),s.jsx("div",{className:"mb-6",children:"mockup"===e&&(0,s.jsxs)("div",{className:"bg-amber-900/10 border border-amber-500/20 text-amber-200 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"}),"Upload your blank product images (T-Shirts, Mugs, etc) here to use them in Nano Banana Pro."]})}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:a.map(e=>s.jsx(g,{theme:e,onTest:N,onUpload:k,onDelete:w,onManage:f},e.id))}),0===a.length&&!n&&(0,s.jsxs)("div",{className:"text-center py-20 border-2 border-dashed border-zinc-800 rounded-2xl",children:[(0,s.jsxs)("p",{className:"text-zinc-500 mb-2",children:["No ",e," themes found."]}),(0,s.jsxs)("button",{onClick:()=>m(!0),className:"text-amber-500 hover:underline",children:["Create your first ","portrait"===e?"theme":"mockup product"]})]}),(0,s.jsxs)(u.M,{children:[d&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:(0,s.jsxs)(x.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6 w-full max-w-sm",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold text-zinc-100 mb-4",children:["Create New ","portrait"===e?"Theme":"Mockup Product"]}),(0,s.jsxs)("form",{onSubmit:z,children:[s.jsx("input",{autoFocus:!0,className:"w-full bg-zinc-950 border border-zinc-800 rounded px-3 py-2 text-zinc-100 mb-4 focus:border-amber-500 outline-none",placeholder:"portrait"===e?"Theme Name (e.g. Superhero)":"Product Name (e.g. White T-Shirt)",value:j,onChange:e=>y(e.target.value)}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-zinc-400 hover:text-zinc-100",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!j.trim(),className:"btn-primary px-4 py-2 rounded",children:"Create"})]})]})]})}),p&&s.jsx(b,{theme:p,type:e,onClose:()=>f(null),onImageDeleted:v})]})]})}},9457:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/taylorstrong/Redemption23-1/project/src/app/admin/layout.tsx#default`)},68767:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/taylorstrong/Redemption23-1/project/src/app/admin/themes/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[9276,9449,6226,3392,163],()=>a(35129));module.exports=s})();