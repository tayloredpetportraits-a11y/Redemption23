"use strict";(()=>{var e={};e.id=1968,e.ids=[1968],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},62918:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>h,routeModule:()=>d,serverHooks:()=>y,staticGenerationAsyncStorage:()=>m});var o={};r.r(o),r.d(o,{POST:()=>c});var s=r(49303),a=r(88716),i=r(60670),n=r(11258),p=r(87070);let u=new n.$D(process.env.GOOGLE_API_KEY||"").getGenerativeModel({model:"gemini-pro"}),l=`
You are Barkley, the friendly and helpful Pet Portrait Concierge for a custom pet art service. 
Your goal is to assist customers with their order redemption process.

Here is the context of the service:
- Customers have purchased a voucher (often from Groupon or similar site).
- They need to redeem it here by uploading their pet's photo.
- We support dogs and cats.
- We offer digital files, and upsells to physical products like canvases, mugs, blankets, etc.
- Shipping typically takes 2-3 weeks for physical products. Digital files are usually ready within 24-48 hours.
- Photos should be well-lit, eye-level with the pet, and not blurry.

Be polite, enthusiastic about pets, and relatively concise. If you don't know an answer (like specific order status lookup), ask them to use the "Contact Support" form to email a human.
`;async function c(e){try{let{message:t,history:r}=await e.json();if(!process.env.GOOGLE_API_KEY)return p.NextResponse.json({error:"Support chat is currently unavailable (Configuration Error)."},{status:503});let o=u.startChat({history:[{role:"user",parts:[{text:l}]},{role:"model",parts:[{text:"Woof! I understand. I am Barkley, ready to help customers with their pet portraits!"}]},...r.map(e=>({role:"user"===e.role?"user":"model",parts:[{text:e.content}]}))]}),s=(await o.sendMessage(t)).response.text();return p.NextResponse.json({response:s})}catch(e){return console.error("Chat API Error:",e),p.NextResponse.json({error:"Failed to generate response."},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/support/chat/route",pathname:"/api/support/chat",filename:"route",bundlePath:"app/api/support/chat/route"},resolvedPagePath:"/Users/taylorstrong/Redemption23-1/project/src/app/api/support/chat/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:y}=d,f="/api/support/chat/route";function g(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:m})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[9276,5972,1258],()=>r(62918));module.exports=o})();