"use strict";(()=>{var e={};e.id=5512,e.ids=[5512],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},29311:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var a={};r.r(a),r.d(a,{GET:()=>u});var s=r(49303),o=r(88716),i=r(60670),n=r(87070),p=r(79777);async function u(){try{let e=await (0,p.GC)("all");return n.NextResponse.json({posts:e})}catch(e){return console.error("Failed to fetch social posts:",e),n.NextResponse.json({error:"Internal Server Error"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/marketing/posts/route",pathname:"/api/admin/marketing/posts",filename:"route",bundlePath:"app/api/admin/marketing/posts/route"},resolvedPagePath:"/Users/taylorstrong/Redemption23-1/project/src/app/api/admin/marketing/posts/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:m}=c,g="/api/admin/marketing/posts/route";function h(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}},79777:(e,t,r)=>{r.d(t,{GC:()=>o,YR:()=>s});var a=r(65655);async function s(e){let t=(0,a.i)(),{data:r,error:s}=await t.from("social_posts").insert({order_id:e.order_id,image_id:e.image_id,caption:e.caption,hashtags:e.hashtags,platform:e.platform||"instagram",status:"draft"}).select().single();if(s)throw s;return r}async function o(e="draft"){let t=(0,a.i)().from("social_posts").select(`
            *,
            images (
                url,
                storage_path
            ),
            orders (
                customer_name,
                pet_name
            )
        `).order("created_at",{ascending:!1});"all"!==e&&(t=t.eq("status",e));let{data:r,error:s}=await t;if(s)throw s;return r}},65655:(e,t,r)=>{r.d(t,{i:()=>s});var a=r(69498);function s(){let e=process.env.SUPABASE_SERVICE_ROLE_KEY;return(0,a.eI)("https://opxgicxdrbpgpsxonogk.supabase.co",e,{auth:{autoRefreshToken:!1,persistSession:!1},global:{fetch:(e,t)=>fetch(e,{...t,cache:"no-store"})}})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5972,9498],()=>r(29311));module.exports=a})();