"use strict";(()=>{var e={};e.id=172,e.ids=[172],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57441:e=>{e.exports=require("sharp")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},55315:e=>{e.exports=require("path")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},6005:e=>{e.exports=require("node:crypto")},5792:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>q,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>x,serverHooks:()=>h,staticGenerationAsyncStorage:()=>j});var s={};t.r(s),t.d(s,{POST:()=>m});var o=t(49303),n=t(88716),i=t(60670),a=t(87070),p=t(94670),u=t(55315),c=t.n(u),d=t(92048),l=t.n(d);async function m(e){try{let r;let{productType:t,customTemplatePath:s,testImageUrl:o}=await e.json();if(!s&&!t)return a.NextResponse.json({error:"Missing productType or customTemplatePath"},{status:400});let n="";if(o&&o.includes("custom_dog.jpg"),n=c().join(process.cwd(),"public","uploads","pets","custom_dog.jpg"),!l().existsSync(n))return a.NextResponse.json({error:"Test portrait not found on server"},{status:404});let i=Date.now(),u=`admin_test_${t}_${i}.png`,d=c().join(process.cwd(),"public","generated","admin_tests");l().existsSync(d)||l().mkdirSync(d,{recursive:!0});let m=c().join(d,u);if(s){let e=s.startsWith("/")?s.slice(1):s;r=c().join(process.cwd(),e)}if(!await (0,p.$y)(n,t||"custom",m,r))return a.NextResponse.json({error:"Generation failed"},{status:500});{let e=`/generated/admin_tests/${u}`;return a.NextResponse.json({success:!0,url:e})}}catch(e){return console.error("Admin Gen Error:",e),a.NextResponse.json({error:"Internal Server Error"},{status:500})}}let x=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/generate-mockup/route",pathname:"/api/admin/generate-mockup",filename:"route",bundlePath:"app/api/admin/generate-mockup/route"},resolvedPagePath:"/Users/taylorstrong/Redemption23-1/project/src/app/api/admin/generate-mockup/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:j,serverHooks:h}=x,q="/api/admin/generate-mockup/route";function f(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:j})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9276,5972,9498,2723,1258,4670],()=>t(5792));module.exports=s})();