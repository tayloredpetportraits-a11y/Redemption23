(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{6151:function(e,t,r){Promise.resolve().then(r.bind(r,9919))},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,t)=>{let r=(0,s.forwardRef)((r,a)=>{let{color:l="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:h,...x}=r;return(0,s.createElement)("svg",{ref:a,...i,width:c,height:c,stroke:l,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(n(e)),u].join(" "),...x},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName="".concat(e),r}},9196:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]])},401:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1473:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9919:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(7437),i=r(2265),n=r(1473);let a=(0,r(9763).Z)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var l=r(9196),c=r(2489),o=r(401),d=r(3145);function u(){let[e,t]=(0,i.useState)(!0),[r,u]=(0,i.useState)(null),[h,x]=(0,i.useState)([]),[m,p]=(0,i.useState)(0),[f,g]=(0,i.useState)("grid");(0,i.useEffect)(()=>{b()},[]),(0,i.useEffect)(()=>{let t=t=>{if(!e&&0!==h.length)switch(t.key.toLowerCase()){case"arrowright":case"a":j("approve");break;case"arrowleft":case"x":j("reject")}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,h,m]);let b=async()=>{t(!0);try{let e=await fetch("/api/admin/review-queue"),r=await e.json();if(!e.ok){console.error("Review queue error:",r.error),t(!1);return}let{orders:s=[],images:i=[]}=r;if(!s||0===s.length){u(null),t(!1);return}v(s[0],i.filter(e=>e.order_id===s[0].id))}catch(e){console.error("Failed to load queue",e)}finally{t(!1)}},v=(e,t)=>{u(e),t&&x(t),p(0),g("grid")},j=async(e,t)=>{var r;let s=t||(null===(r=h[m])||void 0===r?void 0:r.id);s&&(x(e=>e.filter(e=>e.id!==s)),await fetch("/api/admin/review-queue",{method:"POST",body:JSON.stringify({imageId:s,status:"approve"===e?"approved":"rejected"})}),"swipe"===f&&h.length<=1&&N())},w=async()=>{if(!h.length)return;let e=h.map(e=>e.id);x([]),await Promise.all(e.map(e=>fetch("/api/admin/review-queue",{method:"POST",body:JSON.stringify({imageId:e,status:"approved"})}))),N()},N=()=>{b()};return e?(0,s.jsx)("div",{className:"min-h-screen grid place-items-center text-zinc-500",children:"Loading..."}):r&&0!==h.length?(0,s.jsxs)("div",{className:"min-h-screen bg-zinc-950 flex flex-col",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-zinc-800 bg-zinc-900/80 backdrop-blur flex justify-between items-center z-10 sticky top-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[r.pet_image_url&&(0,s.jsx)("div",{className:"w-12 h-12 relative rounded-full overflow-hidden border border-zinc-700",children:(0,s.jsx)(d.default,{src:r.pet_image_url,alt:"Pet",fill:!0,className:"object-cover",unoptimized:!0})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-bold text-zinc-100",children:r.customer_name}),(0,s.jsxs)("div",{className:"flex gap-2 text-xs",children:[(0,s.jsx)("span",{className:"text-zinc-500",children:r.pet_name||"Pet Swap"}),(0,s.jsx)("span",{className:"text-zinc-600",children:"â€¢"}),(0,s.jsx)("span",{className:"text-amber-500",children:r.product_type})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>g("grid"),className:"p-2 rounded ".concat("grid"===f?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-300"),children:(0,s.jsx)(n.Z,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:()=>g("swipe"),className:"p-2 rounded ".concat("swipe"===f?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-300"),children:(0,s.jsx)(a,{className:"w-5 h-5"})}),(0,s.jsx)("div",{className:"h-6 w-px bg-zinc-800 mx-2"}),(0,s.jsxs)("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-green-500/10 text-green-500 hover:bg-green-500/20 rounded-lg text-sm font-medium transition-colors",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"}),"Approve All"]})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-6",children:"grid"===f?(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[r.pet_image_url&&(0,s.jsxs)("div",{className:"aspect-[3/4] rounded-xl overflow-hidden relative ring-2 ring-blue-500/50 group",children:[(0,s.jsx)(d.default,{src:r.pet_image_url,alt:"Reference",fill:!0,className:"object-cover",unoptimized:!0}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:(0,s.jsx)("span",{className:"px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full",children:"Source Pet"})})]}),h.map(e=>(0,s.jsxs)("div",{className:"aspect-[3/4] rounded-xl overflow-hidden relative group ring-1 ring-zinc-800 hover:ring-amber-500 transition-all",children:[(0,s.jsx)(d.default,{src:e.url,alt:"Candidate",fill:!0,className:"object-cover"}),(0,s.jsx)("div",{className:"absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/90 to-transparent",children:(0,s.jsx)("p",{className:"text-xs text-white font-medium truncate",children:e.theme_name||e.type})}),(0,s.jsxs)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3 backdrop-blur-sm",children:[(0,s.jsx)("button",{onClick:()=>j("reject",e.id),className:"p-3 rounded-full bg-red-500/20 text-red-500 hover:bg-red-500 hover:text-white transition-colors",children:(0,s.jsx)(c.Z,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:()=>j("approve",e.id),className:"p-3 rounded-full bg-green-500/20 text-green-500 hover:bg-green-500 hover:text-white transition-colors",children:(0,s.jsx)(o.Z,{className:"w-5 h-5"})})]})]},e.id))]}):(0,s.jsxs)("div",{className:"h-full flex items-center justify-center gap-8",children:[r.pet_image_url&&(0,s.jsxs)("div",{className:"hidden lg:block w-64 aspect-[3/4] rounded-2xl overflow-hidden relative ring-1 ring-zinc-700 shadow-xl opacity-50 hover:opacity-100 transition-opacity",children:[(0,s.jsx)(d.default,{src:r.pet_image_url,alt:"Reference",fill:!0,className:"object-cover",unoptimized:!0}),(0,s.jsx)("div",{className:"absolute top-4 left-4 px-2 py-1 bg-black/60 text-white text-xs rounded",children:"Original"})]}),(0,s.jsx)("div",{className:"relative w-full max-w-md aspect-[3/4] bg-zinc-900 rounded-2xl overflow-hidden shadow-2xl ring-1 ring-zinc-800",children:h[m]&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.default,{src:h[m].url,alt:"Candidate",fill:!0,className:"object-cover"}),(0,s.jsxs)("div",{className:"absolute bottom-0 inset-x-0 p-6 bg-gradient-to-t from-black/80 to-transparent",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:h[m].theme_name}),(0,s.jsxs)("p",{className:"text-zinc-400 text-sm capitalize",children:[h[m].type," Generation"]})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("button",{onClick:()=>j("approve"),className:"p-4 rounded-full bg-green-500/10 text-green-500 hover:bg-green-500 hover:text-white",children:(0,s.jsx)(o.Z,{className:"w-8 h-8"})}),(0,s.jsx)("button",{onClick:()=>j("reject"),className:"p-4 rounded-full bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white",children:(0,s.jsx)(c.Z,{className:"w-8 h-8"})})]})]})})]}):(0,s.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center space-y-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-zinc-100",children:"All Caught Up! \uD83C\uDF89"}),(0,s.jsx)("button",{onClick:b,className:"btn-secondary",children:"Refresh Queue"}),(0,s.jsxs)("div",{className:"pt-8 border-t border-zinc-800 flex flex-col items-center gap-2",children:[(0,s.jsx)("h3",{className:"text-zinc-500 text-sm",children:"Testing Tools"}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("button",{onClick:()=>fetch("/api/admin/seed",{method:"POST",body:JSON.stringify({theme:"royalty"})}).then(b),className:"px-4 py-2 bg-amber-500/10 text-amber-500 rounded hover:bg-amber-500/20 text-sm",children:"+ Test Royalty Order"})})]})]})}}},function(e){e.O(0,[145,971,117,744],function(){return e(e.s=6151)}),_N_E=e.O()}]);