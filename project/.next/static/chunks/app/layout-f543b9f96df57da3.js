(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8223:function(e,t,s){Promise.resolve().then(s.t.bind(s,2580,23)),Promise.resolve().then(s.t.bind(s,3780,23)),Promise.resolve().then(s.t.bind(s,2679,23)),Promise.resolve().then(s.t.bind(s,2778,23)),Promise.resolve().then(s.bind(s,1424)),Promise.resolve().then(s.bind(s,9356))},1424:function(e,t,s){"use strict";s.d(t,{default:function(){return p}});var r=s(7437),n=s(2265),a=s(2489),i=s(2718),l=s(9345),o=s(112),c=s(7586),d=s(5800),u=s(2369),x=s(2222),m=s(5863),h=s(4743);function b(){let[e,t]=(0,n.useState)([{role:"model",content:"Hi! I'm Barkley. How can I help you with your pet portrait today? \uD83D\uDC3E"}]),[s,a]=(0,n.useState)(""),[i,l]=(0,n.useState)(!1),o=(0,n.useRef)(null);async function c(r){if(r.preventDefault(),!s.trim()||i)return;let n=s.trim();a(""),t(e=>[...e,{role:"user",content:n}]),l(!0);try{let s=await fetch("/api/support/chat",{method:"POST",body:JSON.stringify({message:n,history:e.slice(1)}),headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("Failed to fetch");let r=await s.json();t(e=>[...e,{role:"model",content:r.response}])}catch(e){console.error(e),t(e=>[...e,{role:"model",content:"I'm having a little trouble connecting right now. Please try again or use the Contact form! \uD83D\uDC36"}])}finally{l(!1)}}return(0,n.useEffect)(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[e]),(0,r.jsxs)("div",{className:"flex flex-col h-[400px]",children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",ref:o,children:[e.map((e,t)=>(0,r.jsxs)("div",{className:"flex gap-3 ".concat("user"===e.role?"flex-row-reverse":""),children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center shrink-0 ".concat("user"===e.role?"bg-gray-200":"bg-brand-100 text-brand-600"),children:"user"===e.role?(0,r.jsx)(u.Z,{size:16}):(0,r.jsx)(x.Z,{size:16})}),(0,r.jsx)("div",{className:"max-w-[80%] rounded-2xl px-4 py-2 text-sm ".concat("user"===e.role?"bg-black text-white rounded-tr-sm":"bg-gray-100 text-gray-800 rounded-tl-sm"),children:e.content})]},t)),i&&(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-brand-100 flex items-center justify-center text-brand-600 shrink-0",children:(0,r.jsx)(x.Z,{size:16})}),(0,r.jsx)("div",{className:"bg-gray-100 rounded-2xl px-4 py-3 rounded-tl-sm",children:(0,r.jsx)(m.Z,{className:"w-4 h-4 animate-spin text-gray-500"})})]})]}),(0,r.jsxs)("form",{onSubmit:c,className:"p-3 border-t flex gap-2",children:[(0,r.jsx)("input",{value:s,onChange:e=>a(e.target.value),placeholder:"Type your question...",className:"flex-1 px-4 py-2 bg-gray-50 border rounded-full text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:bg-white transition-colors"}),(0,r.jsx)("button",{type:"submit",disabled:!s.trim()||i,className:"w-10 h-10 bg-black text-white rounded-full flex items-center justify-center disabled:opacity-50 hover:scale-105 transition-transform",children:(0,r.jsx)(h.Z,{size:18})})]})]})}function f(){let[e,t]=(0,n.useState)(!1),[s,a]=(0,n.useState)(!1),[i,l]=(0,n.useState)("");async function o(e){e.preventDefault(),t(!0),l(""),a(!1);let s=new FormData(e.currentTarget),r={name:s.get("name"),email:s.get("email"),subject:s.get("subject"),message:s.get("message")};try{if(!(await fetch("/api/support/email",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to send message");a(!0),e.currentTarget.reset()}catch(e){l("Something went wrong. Please try again.")}finally{t(!1)}}return s?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center p-6 bg-green-50 rounded-lg",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(h.Z,{className:"w-6 h-6 text-green-600"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"Message Sent!"}),(0,r.jsx)("p",{className:"text-green-600 mt-2",children:"We'll get back to you as soon as possible."}),(0,r.jsx)("button",{onClick:()=>a(!1),className:"mt-4 text-sm text-green-700 underline hover:text-green-800",children:"Send another message"})]}):(0,r.jsxs)("form",{onSubmit:o,className:"space-y-4 p-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,r.jsx)("input",{type:"text",name:"name",required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none text-sm",placeholder:"Your name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,r.jsx)("input",{type:"email",name:"email",required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none text-sm",placeholder:"email@example.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,r.jsxs)("select",{name:"subject",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none text-sm bg-white",children:[(0,r.jsx)("option",{value:"General Question",children:"General Question"}),(0,r.jsx)("option",{value:"Order Status",children:"Order Status"}),(0,r.jsx)("option",{value:"Issue with Upload",children:"Issue with Upload"}),(0,r.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),(0,r.jsx)("textarea",{name:"message",required:!0,rows:4,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none text-sm resize-none",placeholder:"How can we help?"})]}),i&&(0,r.jsx)("p",{className:"text-xs text-red-500",children:i}),(0,r.jsx)("button",{type:"submit",disabled:e,className:"w-full bg-black text-white py-2 rounded-lg font-medium text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 animate-spin"})," Sending..."]}):"Send Message"})]})}function p(){let[e,t]=(0,n.useState)(!1),[s,u]=(0,n.useState)("chat");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.M,{children:e&&(0,r.jsxs)(d.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed bottom-20 right-4 md:bottom-24 md:right-8 z-50 w-[90vw] md:w-[380px] bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden flex flex-col max-h-[600px]",children:[(0,r.jsxs)("div",{className:"bg-black text-white p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),(0,r.jsx)("span",{className:"font-semibold",children:"Support Concierge"})]}),(0,r.jsx)("button",{onClick:()=>t(!1),className:"p-1 hover:bg-gray-800 rounded-full transition-colors",children:(0,r.jsx)(a.Z,{size:18})})]}),(0,r.jsxs)("div",{className:"flex p-1 bg-gray-100 m-2 rounded-lg",children:[(0,r.jsxs)("button",{onClick:()=>u("chat"),className:"flex-1 py-1.5 text-sm font-medium rounded-md flex items-center justify-center gap-2 transition-all ".concat("chat"===s?"bg-white text-black shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,r.jsx)(i.Z,{size:16}),"Live Chat"]}),(0,r.jsxs)("button",{onClick:()=>u("contact"),className:"flex-1 py-1.5 text-sm font-medium rounded-md flex items-center justify-center gap-2 transition-all ".concat("contact"===s?"bg-white text-black shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,r.jsx)(l.Z,{size:16}),"Contact Us"]})]}),(0,r.jsx)("div",{className:"flex-1 bg-white min-h-[300px]",children:"chat"===s?(0,r.jsx)(b,{}):(0,r.jsx)(f,{})}),(0,r.jsx)("div",{className:"bg-gray-50 p-2 text-center text-xs text-gray-400 border-t",children:"Powered by Pet Portrait AI"})]})}),(0,r.jsxs)("button",{onClick:()=>t(!e),className:"fixed bottom-4 right-4 md:bottom-8 md:right-8 z-50 w-14 h-14 bg-black text-white rounded-full shadow-lg flex items-center justify-center hover:scale-110 transition-transform active:scale-95 group",children:[(0,r.jsx)(c.M,{mode:"wait",children:e?(0,r.jsx)(d.E.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},children:(0,r.jsx)(a.Z,{size:28})},"close"):(0,r.jsx)(d.E.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},children:(0,r.jsx)(o.Z,{size:28})},"open")}),!e&&(0,r.jsx)("span",{className:"absolute right-full mr-3 bg-white text-black text-xs px-2 py-1 rounded shadow-md opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Need help?"})]})]})}},9356:function(e,t,s){"use strict";s.d(t,{ToastProvider:function(){return m},p:function(){return x}});var r=s(7437),n=s(2265),a=s(7586),i=s(5800),l=s(5302),o=s(2252),c=s(3245),d=s(2489);let u=(0,n.createContext)(void 0);function x(){let e=(0,n.useContext)(u);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function m(e){let{children:t}=e,[s,i]=(0,n.useState)([]),l=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=Math.random().toString(36).substring(7);i(r=>[...r,{id:s,type:t,message:e}]),setTimeout(()=>{o(s)},4e3)},[]),o=e=>{i(t=>t.filter(t=>t.id!==e))};return(0,r.jsxs)(u.Provider,{value:{addToast:l},children:[t,(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 pointer-events-none",children:(0,r.jsx)(a.M,{children:s.map(e=>(0,r.jsx)(h,{toast:e,onClose:()=>o(e.id)},e.id))})})]})}function h(e){let{toast:t,onClose:s}=e,n={success:(0,r.jsx)(l.Z,{className:"w-5 h-5 text-emerald-500"}),error:(0,r.jsx)(o.Z,{className:"w-5 h-5 text-red-500"}),info:(0,r.jsx)(c.Z,{className:"w-5 h-5 text-brand-navy"})};return(0,r.jsxs)(i.E.div,{layout:!0,initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.2}},className:"pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg border backdrop-blur-md min-w-[300px] max-w-md ".concat({success:"bg-emerald-50 border-emerald-100",error:"bg-red-50 border-red-100",info:"bg-white border-white/20"}[t.type]),children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:n[t.type]}),(0,r.jsx)("p",{className:"flex-1 text-sm font-medium text-brand-navy",children:t.message}),(0,r.jsx)("button",{onClick:s,className:"p-1 hover:bg-black/5 rounded-full text-brand-navy/40 hover:text-brand-navy transition-colors",children:(0,r.jsx)(d.Z,{className:"w-4 h-4"})})]})}},2778:function(){}},function(e){e.O(0,[273,799,204,971,117,744],function(){return e(e.s=8223)}),_N_E=e.O()}]);